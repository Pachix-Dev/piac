---
import { news } from "../data/data_news_2024.js";
import i18next, { t, changeLanguage } from "i18next";
import Layout from "../layouts/Layout.astro";
import NewsReact from "../components/NewsReact.jsx";

changeLanguage("es");

const currentLanguage = i18next.language;
---

<Layout>
    <section class="py-5 min-h-screen relative">
        <div class="mx-auto px-4">
            <h1
                class="uppercase font-extrabold text-4xl text-center mb-5 border-b-4 border-yellow-500 w-fit mx-auto px-8 pb-3 text-gray-900 drop-shadow-lg tracking-tight"
            >
                {t("newspage.title")}
            </h1>
            <div class="py-8 my-10">
                <h2
                    class="text-3xl md:text-4xl font-bold px-6 mb-8 text-yellow-700 text-center"
                >
                    {t("newspage.subtitle_1")}
                </h2>
                <div class="overflow-x-auto">
                    <div class="flex gap-8 my-4 py-6 px-2">
                        {
                            news.map((item) => (
                                <a
                                    href={
                                        currentLanguage === "en"
                                            ? "/en/news/" + item.slug
                                            : "/news/" + item.slug
                                    }
                                >
                                    <div class="flex flex-col items-center min-w-[260px] bg-amber-50 rounded-2xl  hover:scale-105 hover:shadow-2xl transition-all duration-300 p-6 ">
                                        <div class="w-12 h-12 text-white bg-yellow-500 rounded-full flex items-center justify-center mb-4 shadow-lg">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke-width="1.5"
                                                stroke="currentColor"
                                                class="size-6"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"
                                                />
                                            </svg>
                                        </div>
                                        <img
                                            src={item.src}
                                            alt={item.title}
                                            class="w-36 h-24 object-cover rounded-lg mb-2 shadow"
                                        />
                                        <h4 class="font-bold text-lg text-center text-gray-800 mb-1">
                                            {currentLanguage === "en"
                                                ? item.title_en
                                                : item.title}
                                        </h4>
                                        <time class="block mb-1 text-xs text-gray-400">
                                            {item.year}
                                        </time>
                                        <p class="text-sm text-gray-700 text-center">
                                            {currentLanguage === "en"
                                                ? item.subtitle_en
                                                : item.subtitle}
                                        </p>
                                    </div>
                                </a>
                            ))
                        }
                    </div>
                </div>
            </div>

            {/* MÃ¡s actualizaciones */}
            <div class="py-10 my-12">
                <h2
                    class="text-3xl md:text-4xl font-bold px-6 mb-10 text-yellow-700 text-center"
                >
                    {t("newspage.subtitle_2")}
                </h2>
                <div class="grid justify-center">
                    <NewsReact currentLanguage={currentLanguage} />
                </div>
            </div>
        </div>
        <button
            class="fixed bottom-8 right-8 z-50 bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 transition-all duration-300"
            onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
            aria-label="Volver arriba"
        >
            {t("button_back_top")}
            <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M5 15l7-7 7 7"></path>
            </svg>
        </button>
    </section>
</Layout>
